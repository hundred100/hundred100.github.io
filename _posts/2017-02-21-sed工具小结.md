# sed工具小结

**sed**本身也是一个管道命令，可以分析standard input的，sed可以将数据进行替换、删除、新增、选取特定行等。
 
-------------------

## sed的用法

> $ sed [-nefr] [动作]
> 参数:
> + -n : 使用安静模式。在一般sed用法中，所有来自STDIN的数据一般都会被列出到屏幕上。但如果加上-n参数后，则只有经过sed特殊处理的那一行（或者操作）才会被列出来。
> + -e : 直接在命令行模式上进行sed的动作编辑。（默认）
> + -f : 直接将sed的动作写在一个文件内，-f filename则可以执行filename内的sed动作。
> + -r : sed的动作支持的是扩展型正则表达式的语法（默认是基础正则表达式语法）。
> + -i : 直接修改读取的文件内容，而不是屏幕输出。
> 
>   ***默认情况下sed不直接作用于读取的文件中***
>   
> 动作说明: **[n1[,n2]] function**
> * n1,n2 : 不见得会存在，一般代表选择进行动作的行数，举例来说，如果我的动作是需要在10到20行之间进行的，则“10，20[动作行为]”。
> 
> function 有下面的这些参数:
> + a : 新增到下一行，后面可以接字符串
> + c : 替换，后面可以接字符串
> + d : 删除，后面不接热河参数
> + i : 插入到上一行，后面可接字符串
> + p : 打印，通常会与参数 ***sed -n*** 一起运行
> + s : 查找并替换特定字符串，通常搭配正则表达式。
> ***例如，1,20s/old/new/g***



##演示
``` 
//假设有text文件

$ sed '2，5d' text #将第2～5行删除
$ sed '2a hahaha' text #在第二行后加上“hahaha”字样
$ sed '2a hahaha\
> xixixi' text     #在第二行后加上两行字
$ sed '2，5c No 2-5 number' text #将第2～5行的内容替换成为“No 2-5 number”，是整行替换
$ sed -n '5，7p' text #将5～7行打印出来，一定要加 -n
$ sed 's/hahaha/ssss/g' text #将hahaha字段替换成ssss，这是部分数据的查找并替换
```

>***sed还可以和正则表达式配合使用***
>如:
> ```
> $ sed 's/^h/ssss/g' text #将h开头的字段替换成ssss
> ```

##注意
>* **sed**后面接的动作，务必以两个单引号括住。
* 使用p(打印)参数时，**sed**一定要用**-n**，否则所有的行都会被输出，这样就没有意义了。
* **sed**默认不直接作用于读取的文件中。
* -i参数要慎用，它会直接修改读取的文件内容。
